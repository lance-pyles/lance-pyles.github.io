<html>
<head>
<style>
table, th, td {
  border: 1px solid black;
  border-collapse: collapse;
}
.hide {
  display: none;
}
    
.myDIV:hover + .hide {
  display: block
}
img:active:hover{
    transform:scale(5.12);
}
</style>
</head>
<body>
  <h1>In progress...</h1>
<label for="games">Choose a game:</label>

<select name="games" id="games">
  <option value="33214">Fortnite</option>
  <option value="460649">Splatoon</option>
  <option value="2692">Super Mario 64</option>
</select>
<p id="token"></p>
<button type="button" onclick="search()">Click Me!</button>
<div class="hide"><img height=100 width=100></div>
<table id="streams">
    
</table>

<script>
const urlParams = new URLSearchParams(location.hash);
  var table = document.getElementById("streams");
  table.innerHTML = "<tr><th>user_name</th><th>game_name</th><th>viewer_count</th><th>thumbnail_url</th><th>Thumbnail</th></tr>";
function search(){
  var table = document.getElementById("streams");
  table.innerHTML = "<tr><th>user_name</th><th>game_name</th><th>viewer_count</th><th>thumbnail_url</th><th>Thumbnail</th></tr>";


var e = document.getElementById("games");
var value = e.value;
var page1pagination;
document.getElementById("token").innerHTML = "Token:" + urlParams.get('#access_token');
  
fetch("https://api.twitch.tv/helix/streams?game_id=" + value + "&type=live", {
method: "GET",
headers: {"Content-type": "application/x-www-form-urlencoded;charset=UTF-8;", "Authorization": "Bearer eet4p9xb1qy0n2vxwtzm5x1q6p8edi", "Client-Id": "9w7l1oen3pmdj1ezkloj0irud7me3p"}
})
.then(response => response.json())
.then(data => 
 
     
 {

  for (const product of data.data) {

      var row = table.insertRow(-1);
      var cell1 = row.insertCell(0);
      var cell2 = row.insertCell(1);
    var cell3 = row.insertCell(2);
        var cell4 = row.insertCell(3);
            var cell5 = row.insertCell(4);
      cell1.innerHTML = product.user_name;
      cell2.innerHTML = product.game_name;
          cell3.innerHTML = product.viewer_count;
    cell4.innerHTML = "<a href=" + product.thumbnail_url.replace("{width}","512").replace("{height}","512") + ">Thumbnail</a>";
    cell4.className = "myDIV";
        cell5.innerHTML = "<img width=100 height=100 src=" + product.thumbnail_url.replace("{width}","512").replace("{height}","512") + ">";
    }
 });
  fetch("https://api.twitch.tv/helix/streams?game_id=" + value + "&type=live", {
method: "GET",
headers: {"Content-type": "application/x-www-form-urlencoded;charset=UTF-8;", "Authorization": "Bearer eet4p9xb1qy0n2vxwtzm5x1q6p8edi", "Client-Id": "9w7l1oen3pmdj1ezkloj0irud7me3p"}
})
.then(response => response.json())
.then(data => 
 
     
 {
  for (const product of data.data) {

      var row = table.insertRow(-1);
      var cell1 = row.insertCell(0);
      var cell2 = row.insertCell(1);
    var cell3 = row.insertCell(2);
        var cell4 = row.insertCell(3);
            var cell5 = row.insertCell(4);
      cell1.innerHTML = product.user_name;
      cell2.innerHTML = product.game_name;
          cell3.innerHTML = product.viewer_count;
    cell4.innerHTML = "<a href=" + product.thumbnail_url.replace("{width}","512").replace("{height}","512") + ">Thumbnail</a>";
    cell4.className = "myDIV";
        cell5.innerHTML = "<img width=100 height=100 src=" + product.thumbnail_url.replace("{width}","512").replace("{height}","512") + ">";
    }
 });
}

  

</script>

</body>
</html>
