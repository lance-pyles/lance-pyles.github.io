<h1>Coming Soon</h1>
<label for="games">Choose a game:</label>

<select name="games" id="games">
  <option value="33214">Fortnite</option>
  <option value="460649">Splatoon</option>
  <option value="2692">Super Mario 64</option>
</select>
<p id="demo"></p>
<p id="demo2"></p>
<ul></ul>
<table id="streams">
</table>
<button type="button" onclick="search()">Click Me!</button>
<script>
const urlParams = new URLSearchParams(location.hash);
const myList = document.querySelector("ul");
function search(){
  var table = document.getElementById("streams");
      var row = table.insertRow(0);
      var cell1 = row.insertCell(0);
      var cell2 = row.insertCell(1);
      cell1.innerHTML = "user_name";
      cell2.innerHTML = "game_name";
myList.innerHTML = "";
var e = document.getElementById("games");
var value = e.value;

document.getElementById("demo").innerHTML = "Token:" + urlParams.get('#access_token');
  
fetch("https://api.twitch.tv/helix/streams?game_id=" + value + "&type=live", {
method: "GET",
headers: {"Content-type": "application/x-www-form-urlencoded;charset=UTF-8;", "Authorization": "Bearer eet4p9xb1qy0n2vxwtzm5x1q6p8edi", "Client-Id": "9w7l1oen3pmdj1ezkloj0irud7me3p"}
})
.then(response => response.json())
.then(data => 
 
     
 {
  for (const product of data.data) {
      const listItem = document.createElement("li");
      listItem.appendChild(document.createElement("strong")).textContent = product.user_name + " (" + product.game_name + ")";
      myList.appendChild(listItem);
      var row = table.insertRow(0);
      var cell1 = row.insertCell(0);
      var cell2 = row.insertCell(1);
      cell1.innerHTML = product.user_name;
      cell2.innerHTML = product.game_name;
    }
 });
}

</script>
